<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Laporan Produksi Harian</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
    h2 { background: #343a40; color: white; padding: 10px; border-radius: 6px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background: white; }
    th, td { border: 1px solid #dee2e6; padding: 8px; text-align: center; }
    th { background: #e9ecef; }
    .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
    .btn-save { background: #28a745; color: white; }
    .btn-delete { background: #dc3545; color: white; }
    .btn-login { background: #007bff; color: white; }
  </style>
</head>
<body>

  <h2>Laporan Produksi Harian</h2>

  <!-- Preparation -->
  <h3>Preparation</h3>
  <table>
    <tr><th>Item</th><th>Jumlah</th></tr>
    <tr><td>Bobin</td><td><input type="number" id="prep_bobin"></td></tr>
    <tr><td>Reject</td><td><input type="number" id="prep_reject"></td></tr>
  </table>

  <!-- Pulp -->
  <h3>Pulp</h3>
  <table>
    <tr><th>Item</th><th>Jumlah</th></tr>
    <tr><td>Pulp Masuk</td><td><input type="number" id="pulp_in"></td></tr>
    <tr><td>Pulp Keluar</td><td><input type="number" id="pulp_out"></td></tr>
  </table>

  <!-- Finish Good -->
  <h3>Finish Good</h3>
  <table>
    <tr><th>Item</th><th>Jumlah</th></tr>
    <tr><td>Jumlah FG</td><td><input type="number" id="fg_jumlah"></td></tr>
    <tr><td>Reject FG</td><td><input type="number" id="fg_reject"></td></tr>
  </table>

  <!-- Cylinder -->
  <h3>Cylinder</h3>
  <table>
    <tr><th>Item</th><th>Jumlah</th></tr>
    <tr><td>Cylinder Masuk</td><td><input type="number" id="cyl_in"></td></tr>
    <tr><td>Cylinder Keluar</td><td><input type="number" id="cyl_out"></td></tr>
  </table>

  <!-- Slitting -->
  <h3>Slitting</h3>
  <table>
    <tr><th>Item</th><th>Jumlah</th></tr>
    <tr><td>Total Bobin</td><td><input type="number" id="slit_total"></td></tr>
    <tr><td>Reject Produksi</td><td><input type="number" id="slit_reject"></td></tr>
    <tr><td>Reject NCP</td><td><input type="number" id="slit_ncp"></td></tr>
    <tr><td>Berat per Bobin (kg)</td><td><input type="number" id="slit_kg"></td></tr>
  </table>
  <button class="btn btn-save" onclick="hitungSlitting()">Hitung OEE</button>

  <h4>Hasil Slitting</h4>
  <table>
    <tr><th>OKE</th><th>OEE (%)</th></tr>
    <tr><td id="slit_oke">-</td><td id="slit_oee">-</td></tr>
  </table>

  <h2>Rekap Laporan Harian</h2>
  <table id="rekapTable">
    <tr>
      <th>Bagian</th>
      <th>Jumlah</th>
      <th>Reject</th>
      <th>OKE</th>
      <th>OEE (%)</th>
    </tr>
    <tr><td>Preparation</td><td id="rekap_prep">-</td><td id="rekap_prep_rej">-</td><td>-</td><td>-</td></tr>
    <tr><td>Pulp</td><td id="rekap_pulp">-</td><td>-</td><td>-</td><td>-</td></tr>
    <tr><td>Finish Good</td><td id="rekap_fg">-</td><td id="rekap_fg_rej">-</td><td>-</td><td>-</td></tr>
    <tr><td>Cylinder</td><td id="rekap_cyl">-</td><td>-</td><td>-</td><td>-</td></tr>
    <tr><td>Slitting</td><td id="rekap_slit">-</td><td id="rekap_slit_rej">-</td><td id="rekap_slit_oke">-</td><td id="rekap_slit_oee">-</td></tr>
  </table>

  <button class="btn btn-save" onclick="simpanLaporan()">Simpan Laporan</button>
  <button class="btn btn-delete" onclick="mintaLogin()">Hapus Laporan</button>

  <!-- Modal Login -->
  <div id="loginModal" style="display:none; background:#fff; border:1px solid #ccc; padding:20px;">
    <h3>Login untuk Hapus</h3>
    <label>Username: <input type="text" id="username"></label><br><br>
    <label>Password: <input type="password" id="password"></label><br><br>
    <button class="btn btn-login" onclick="hapusDenganLogin()">Login & Hapus</button>
  </div>

  <script>
    function hitungSlitting() {
      let total = parseInt(document.getElementById("slit_total").value) || 0;
      let rejProd = parseInt(document.getElementById("slit_reject").value) || 0;
      let rejNcp = parseInt(document.getElementById("slit_ncp").value) || 0;

      let oke = total - rejProd - rejNcp;
      if (oke < 0) oke = 0;

      // Rumus sederhana OEE dari total bobin
      let quality = (oke / total) || 0;
      let availability = 1; // diasumsikan tidak ada downtime
      let performance = 1;  // diasumsikan sesuai target
      let oee = availability * performance * quality * 100;

      document.getElementById("slit_oke").innerText = oke;
      document.getElementById("slit_oee").innerText = oee.toFixed(2);

      document.getElementById("rekap_slit").innerText = total;
      document.getElementById("rekap_slit_rej").innerText = rejProd + rejNcp;
      document.getElementById("rekap_slit_oke").innerText = oke;
      document.getElementById("rekap_slit_oee").innerText = oee.toFixed(2);
    }

    function simpanLaporan() {
      alert("Laporan berhasil disimpan (simulasi).");
    }

    function mintaLogin() {
      document.getElementById("loginModal").style.display = "block";
    }

    function hapusDenganLogin() {
      let user = document.getElementById("username").value;
      let pass = document.getElementById("password").value;

      if (user === "Tirta" && pass === "Komunitas") {
        document.getElementById("rekapTable").innerHTML = "";
        alert("Laporan berhasil dihapus.");
        document.getElementById("loginModal").style.display = "none";
      } else {
        alert("Username atau password salah!");
      }
    }
  </script>
</body>
</html>
